<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="The main entry point for the LinkedIn post scheduler API server. This function sets up and runs the server that handles scheduling, updating, querying, and deleting posts using MongoDB as the backend database."><title>main in web_server - Rust</title><script>if(window.location.protocol!=="file:")document.head.insertAdjacentHTML("beforeend","SourceSerif4-Regular-46f98efaafac5295.ttf.woff2,FiraSans-Regular-018c141bf0843ffd.woff2,FiraSans-Medium-8f9a781e4970d388.woff2,SourceCodePro-Regular-562dcc5011b6de7d.ttf.woff2,SourceCodePro-Semibold-d899c5a5c4aeb14a.ttf.woff2".split(",").map(f=>`<link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/${f}">`).join(""))</script><link rel="stylesheet" href="../static.files/normalize-76eba96aa4d2e634.css"><link rel="stylesheet" href="../static.files/rustdoc-dd39b87e5fcfba68.css"><meta name="rustdoc-vars" data-root-path="../" data-static-root-path="../static.files/" data-current-crate="web_server" data-themes="" data-resource-suffix="" data-rustdoc-version="1.80.1 (3f5fd8dd4 2024-08-06)" data-channel="1.80.1" data-search-js="search-d52510db62a78183.js" data-settings-js="settings-4313503d2e1961c2.js" ><script src="../static.files/storage-118b08c4c78b968e.js"></script><script defer src="sidebar-items.js"></script><script defer src="../static.files/main-20a3ad099b048cf2.js"></script><noscript><link rel="stylesheet" href="../static.files/noscript-df360f571f6edeae.css"></noscript><link rel="alternate icon" type="image/png" href="../static.files/favicon-32x32-422f7d1d52889060.png"><link rel="icon" type="image/svg+xml" href="../static.files/favicon-2c020d218678b618.svg"></head><body class="rustdoc fn"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle" title="show sidebar"></button></nav><nav class="sidebar"><div class="sidebar-crate"><h2><a href="../web_server/index.html">web_server</a><span class="version">0.1.0</span></h2></div><div class="sidebar-elems"></div></nav><div class="sidebar-resizer"></div><main><div class="width-limiter"><rustdoc-search></rustdoc-search><section id="main-content" class="content"><div class="main-heading"><h1>Function <a href="index.html">web_server</a>::<wbr><a class="fn" href="#">main</a><button id="copy-path" title="Copy item path to clipboard">Copy item path</button></h1><span class="out-of-band"><a class="src" href="../src/web_server/web.rs.html#109-144">source</a> · <button id="toggle-all-docs" title="collapse all docs">[<span>&#x2212;</span>]</button></span></div><pre class="rust item-decl"><code>pub(crate) fn main()</code></pre><details class="toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>The main entry point for the LinkedIn post scheduler API server.
This function sets up and runs the server that handles scheduling, updating,
querying, and deleting posts using MongoDB as the backend database.</p>
<h2 id="functionality"><a class="doc-anchor" href="#functionality">§</a>Functionality</h2>
<ol>
<li>
<p><strong>Logging Initialization</strong>: Initializes the logging environment using <code>env_logger</code>
to provide detailed runtime information for monitoring and debugging.</p>
</li>
<li>
<p><strong>MongoDB Connection</strong>: Establishes a connection to a MongoDB database,
specifically targeting the <code>lkdin-posts</code> database and the <code>posts</code> collection,
where scheduled posts are stored.</p>
</li>
<li>
<p><strong>CORS Configuration</strong>: Configures Cross-Origin Resource Sharing (CORS) to allow
the frontend (running on a different origin) to communicate with this backend server,
enabling HTTP methods such as GET, POST, PUT, and DELETE.</p>
</li>
<li>
<p><strong>Routing Setup</strong>: Sets up the various HTTP routes using the Warp framework:</p>
<ul>
<li><code>POST /schedule</code>: Schedule a new post by inserting it into the MongoDB collection.</li>
<li><code>GET /posts</code>: Query scheduled posts within a specified date range.</li>
<li><code>PUT /posts/{id}</code>: Update an existing post by its ID.</li>
<li><code>DELETE /posts/{id}</code>: Delete a post by its ID.</li>
</ul>
</li>
<li>
<p><strong>Server Execution</strong>: The server is started and listens on <code>http://localhost:8080/</code>,
serving the defined routes with the CORS configuration.</p>
</li>
</ol>
<h2 id="errors"><a class="doc-anchor" href="#errors">§</a>Errors</h2>
<p>This function will terminate with an error in the following situations:</p>
<ul>
<li>If the connection to the MongoDB database fails.</li>
<li>If the server fails to start due to issues such as port conflicts or other I/O errors.</li>
</ul>
<h2 id="example"><a class="doc-anchor" href="#example">§</a>Example</h2>
<p>To run the server, simply execute the binary. Ensure that MongoDB is running
and accessible at the configured URI (<code>mongodb://localhost:27017</code> by default).</p>
<div class="example-wrap"><pre class="language-bash"><code>cargo run --bin web_server
</code></pre></div>
<p>Once the server is running, you can interact with it using tools like <code>curl</code> or Postman,
or through a frontend application that communicates with this backend.</p>
<h2 id="returns"><a class="doc-anchor" href="#returns">§</a>Returns</h2>
<p>This function is asynchronous and returns a <code>Result&lt;(), Box&lt;dyn std::error::Error&gt;&gt;</code>.
It will return <code>Ok(())</code> if the server runs successfully, or an <code>Err</code> if an error occurs during setup or execution.</p>
</div></details></section></div></main></body></html>